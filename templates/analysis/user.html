{% extends 'base.html' %}
{% load static %}
{% block title %}YourSite{% endblock title %}

{% block css %}
.seller-container {
width: 100%;
max-width: 1440px;
margin: 0 auto;
position: relative;
height: 100%;
}
.sidebar {
background: #fff;
position: absolute;
width: 100%;
top: 0;
height: 100%;
}
.sidebar .user {
display: flex;
align-items: center;
padding: 35px 20px;
flex-direction: column;
background: #fff;
}
.sidebar .user img {
width: 100px;
height: 100px;
object-fit: cover;
border-radius: 100%;
background: #c2c2c2;
margin-bottom: 15px;
}
.sidebar .user .user-details h1 {
font-size: 22px;
font-weight: bold;
text-align: center;
}
.sidebar .user .user-details p {
font-size: 14px;
line-height: 20px;
margin-bottom: 0;
}
.sidebar ul {
padding: 20px 20px;
}
.sidebar ul li {
list-style: none;
margin: 10px 0;
color: black;
text-decoration: none;
width: 100%;
padding: 10px 0;
display: flex;
align-items: center;
justify-content: space-between;
}
.sidebar ul li p {
font-size: 14px;
margin-bottom: 0;
display: flex;
align-items: center;
}
.sidebar ul li h2 {
font-size: 20px;
margin-bottom: 0;
font-weight: bold;
}

.sidebar ul li p img {
margin-right: 6px;
width: 20px;
}
<!-- .sidebar ul li a:hover {
background: black;
color: white;
font-weight: bold;
} -->
.sidebar-content {
padding-left: 40px;
margin-bottom: 30px;
}
.collapse-card {
margin: 30px 0;
}
.collapse-card .collapse-card-header {
background: #fff;
}
.collapse-card .collapse-card-header .btn {
width: 100%;
text-align: left;
padding: 20px 25px;
border: none;
font-size: 20px;
box-shadow: none;
outline: none;
color: black;
text-decoration: none;
font-weight: bold;
}
.collapse-card .collapse-card-body {
padding: 25px;
font-size: 16px;
background: #fff;
border-top: 2px solid #e6e6e6;
}
.collapse-card .load-more-btn {
display: none;
margin: 40px auto 20px;
padding: 10px 25px;
font-size: 14px;
border: none;
outline: none;
background: #000;
color: #fff;
font-weight: bold;
border-radius: 5px;
}
.product-card {
display: flex;
align-items: center;
background: #eee;
width: 100%;
justify-content: space-between;
padding: 20px;
margin-bottom: 20px;
}
.product-card:last-child {
margin-bottom: 0;
}
.product-card .product-details {
display: flex;
align-items: center;

}
.product-card .product-details img {
width: 50px;
height: 50px;
object-fit: cover;
}
.product-card .product-details h2 {
font-size: 20px;
margin-bottom: 0;
font-weight: bold;
margin-left: 20px;
}
.product-card .product-card-right {
display: flex;
align-items: center;
}
.product-card .product-card-right .buttons-container {
display: flex;
align-items: center;
}
.product-card .product-card-right .buttons-container .sales {
display: flex;
align-items: center;
width: 100%;
justify-content: space-between;
background: #fff;
padding: 5px 15px;
border-radius: 4px;
margin-right: 20px;

}
.product-card .product-card-right .buttons-container .sales p {
font-size: 18px;
margin-bottom: 0;
line-height: normal;
margin-right: 5px;
}
.product-card .product-card-right .buttons-container .sales h3 {
font-size: 18px;
margin-bottom: 0;
font-weight: bold;
line-height: normal;

}
.product-card .product-card-right .buttons-container .buttons {
display: flex;
align-items: center;
}
.product-card .product-card-right .buttons-container .buttons .button {
border: none;
outline: none;
padding: 5px 10px;
box-shadow: none;
line-height: normal;
font-size: 12px;
color: black;
margin-left: 10px;
border-radius: 4px;

}
.dropdown .btn::after{
content: none;
}
.dropdown .btn {
padding: 0;
border: none;
outline: none;
margin-left: 20px;
display: flex;
align-items: center;
box-shadow: none !important;
background-color: transparent !important;
}
.dropdown .btn i {
font-size: 20px;
line-height: normal;
}
.product-card .approve-btn {
background-color: #28a745;
color: #fff !important;
margin-left: 0 !important;
}
.product-card .type-btn {
background-color: #ffc107;
}
.sales-btn {
background-color: #f8f9fa;
}
.loader {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      position: relative;
      animation: rotate 1s linear infinite
    }
    .loader::before {
      content: "";
      box-sizing: border-box;
      position: absolute;
      inset: 0px;
      border-radius: 50%;
      border: 5px solid #FFF;
      animation: prixClipFix 2s linear infinite ;
    }

    @keyframes rotate {
      100%   {transform: rotate(360deg)}
    }

    @keyframes prixClipFix {
        0%   {clip-path:polygon(50% 50%,0 0,0 0,0 0,0 0,0 0)}
        25%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 0,100% 0,100% 0)}
        50%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,100% 100%,100% 100%)}
        75%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 100%)}
        100% {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 0)}
    }
{% endblock css %}

{% block body %}
<div class="main seller-container">
    <!-- Dashboard -->
    <div class="row">
        <div class="col-3">
            <div class="sidebar">
                <div class="user">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTL5T9o5Jww6mim8gRRC9BhRqEcBLnRiU1UCA&usqp=CAU"
                        alt="">
                    <div class="user-details">
                        <h1 class="mb-0">Selena Gomez</h1>
                    </div>
                </div>
                <ul>
                    <li class="mt-0">
                        <p><img src="{% static 'assets/img/total-sales-icon.svg' %}" />Total Sales</p>
                        <h2>00</h2>
                    </li>
                    <li>
                        <p><img src="{% static 'assets/img/total-order-icon.svg' %}" /></i>Total Orders</p>
                        <h2>00</h2>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-9">
            <div class="sidebar-content">
                <div id="accordion">
                    <div class="collapse-card">
                        <div class="collapse-card-header p-0" id="headingOne">
                            <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne"
                                aria-expanded="true" aria-controls="collapseOne">
                                Orders
                            </button>
                        </div>

                        <div id="collapseOne" class="collapse" aria-labelledby="headingOne">
                            <div class="collapse-card-body">
                                Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad
                                squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck
                                quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it
                                squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica,
                                craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur
                                butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth
                                nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                            </div>
                        </div>
                    </div>
                    <div class="collapse-card">
                        <div class="collapse-card-header p-0" id="headingTwo">
                            <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo"
                                aria-expanded="true" aria-controls="collapseTwo">
                                Products
                            </button>
                        </div>

                        <div id="collapseTwo" class="collapse show" aria-labelledby="headingTwo">
                            <div class="collapse-card-body">
                                <div id="add_to_me"></div>
                                <button onclick="loadData()" class="load-more-btn">Load More</button>
                            </div>
                        </div>
                    </div>
                    <div class="collapse-card">
                        <div class="collapse-card-header p-0" id="headingThree">
                            <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseThree"
                                aria-expanded="true" aria-controls="collapseThree">
                                Brochures
                            </button>
                        </div>

                        <div id="collapseThree" class="collapse " aria-labelledby="headingThree">
                            <div class="collapse-card-body">
                                Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad
                                squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck
                                quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it
                                squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica,
                                craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur
                                butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth
                                nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                            </div>
                        </div>
                    </div>
                    <div class="collapse-card">
                        <div class="collapse-card-header p-0" id="headingFour">
                            <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseFour"
                                aria-expanded="true" aria-controls="collapseFour">
                                Marketing Results
                            </button>
                        </div>

                        <div id="collapseFour" class="collapse " aria-labelledby="headingFour" data-parent="#accordion">
                            <div class="collapse-card-body">
                                Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad
                                squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck
                                quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it
                                squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica,
                                craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur
                                butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth
                                nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

{% endblock body %}

{% block js %}

<script>
    let products = [];
    let offset = 5;

    function fetchData() {
        $.ajax({
            type: 'GET',
            url: `/api/v1/products/?limit=5&offset=${offset}`,
            success: function (data) {
                const displayValue = data.next ? "block" : "none";
                const loadMoreBtns = document.querySelectorAll('.load-more-btn');
                loadMoreBtns.forEach(btn => {
                    btn.style.display = displayValue;
                });
                products.push(data['results'])
                displayProducts();
            },
            error: function (error) {
                console.log('Error:', error);
            },
        });
    }

    function displayProducts() {
        const container = document.getElementById('add_to_me');
        container.innerHTML = ''; // Clear previous content
        let value = products.forEach(elem => {
            elem.forEach(element => {
                const productCard = document.createElement('div');
                productCard.classList.add('product-card');
                productCard.innerHTML = `
          <div class="product-details">
            <img src="https://media.licdn.com/dms/image/C4E12AQGjiSsUfLHO4g/article-cover_image-shrink_720_1280/0/1598606996302?e=2147483647&v=beta&t=n9RdJ-5y4HzAKNM212sLyGCknzQXaRDr11kc2NIUXsk" alt="">
            <h2>${element.title}</h2>
          </div>
          <div class="product-card-right">
            <div class="buttons-container">
              <div class="sales">
                <p>Sales:</p>
                <h3>000</h3>
              </div>
              <div class="buttons">
                <button class="button approve-btn">Approve</button>
                <button class="button type-btn">${element.product_type}</button>
              </div>
            </div>
            <div class="dropdown">
            <button type="button" onclick="toggleDropdown()" class="btn dropdown-toggle" aria-haspopup="true" aria-expanded="false">
                <i class="fa fa-ellipsis-v"></i>
            </button>
            <div id="dropdownMenu1" class="dropdown-menu hideable-element">
                <a class="dropdown-item" href="#">Update</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Delete</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Analysis</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Market</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Brochure</a>
            </div>
            </div>

          </div>
        `;
                container.appendChild(productCard);
            });
        })
    }
    function toggleDropdown() {
        console.log("heree");
    }
    function toggleDropdown() {
        const dropdownMenu = document.getElementById('dropdownMenu1');
        dropdownMenu.classList.toggle('show');
    }
    function loadData() {
        offset += 5;
        console.log(offset);
        fetchData();
    }
    fetchData();
</script>

{% endblock js %}